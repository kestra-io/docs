---
title: BitBucket Pipes
---

## Setup a BitBucket Pipes

1. 

2. 

3.


4. Consider the following pipeline:

```yaml

image: kestra/kestra

pipelines:
  default:
    - step:
        name: 'Validate Kestra flows'
        deployment: staging
        script:
          - /bin/sh /app/kestra flow validate flows/ --local

    - step:
        name: 'Deploy Kestra flows'
        deployment: production
        script:
          - echo $SERVER
          - echo $KESTRA_USER
          - echo $KESTRA_PASSWORD
          - /bin/sh /app/kestra flow namespace update dev flows/ --server=$SERVER --tenant=demo --user=$KESTRA_USER:$KESTRA_PASSWORD
```

Using the CLI


You can find the specification of the [Kestra CLI in the corresponding documentation](05.developer-guide/13.cicd/index.md)