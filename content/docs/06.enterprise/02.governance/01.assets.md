---
title: Assets
icon: /docs/icons/admin.svg
editions: ["EE", "Cloud"]
version: ">= 1.2.0"
---

Define, track, and manage metadata about resources created or used by Kestra flows.

## Overview

Assets can be created automatically by tasks or manually from the **Assets** UI page. From this page, users can view and edit asset metadata, inspect **Executions** that created or updated the asset, and explore a **Dependencies** graph showing relationships between assets, flows, and apps.

This feature enables:

- Shipping metadata to lineage providers (e.g., OpenLineage).
- Populating dropdowns or Pebble inputs with live assets (e.g., available VMs).
- Monitoring assets and their state from custom dashboards.
- Reacting to asset changes (e.g., VM powered on/off) that emit events.

## Asset definition

Assets can be defined directly on a task using the `assets` array property or created dynamically using a `Materialize` task.

| Field | Description |
| --- | --- |
| `id` | unique within a namespace |
| `namespace` | each asset is tied to a namespace for RBAC reasons |
| `type` | free-form string used for filtering, must be indexed |
| `displayName` | optional human-readable name |
| `description` | markdown-supported documentation |
| `values` | arbitrary key-value metadata |
| `relatedAssets` | array of related asset IDs in the format `{namespace, assetId}` |
| `relatedApps` | array of app IDs |
| `relatedFlows` | array of `{namespace, flow, taskIds}` with `taskIds` being optional |
| `emitEvents` | optional boolean, default `false` |

Each asset defined in a flow YAML automatically stores its `flowId` and last execution status.

### Inline asset on a task

This example shows an inline asset definition that reads values from the execution context:

```yaml
id: provisionVM
namespace: company.team

tasks:
  - id: launch_ec2
    type: io.kestra.plugin.core.http.Request
    uri: http://console.aws.cloud
    assets:
      - id: my_ec2
        type: VM
        namespace: company.team
        displayName: My VM
        description: Production EC2 instance
        values:
          ip: "{{ outputs.launch_ec2.ip }}"
          status: ON
          cloud: AWS
          region: us-east-1
          maintainer: Faizan
          createdAt: "{{ now() }}"
        relatedAssets:
          - cluster_1
        relatedFlows:
          - namespace: company.team
            flow: shutDownVM # taskIds array can be defined optionally
```

### Materialize task syntax

Define assets dynamically from task output using the Materialize task:
```yaml
  - id: materialize
    type: io.kestra.plugin.ee.core.assets.Materialize
    materializeAssets:
      - id: "{{ taskrun.value.instance_id }}"
        type: EC2
        values: "{{ taskrun.value | jq('del(.instance_id)') }}"
```

### Full Materialize example

Materialize a list of EC2-like assets generated by a script:
```yaml
id: create_asset
namespace: company.team

tasks:
  - id: python
    type: io.kestra.plugin.scripts.python.Script
    dependencies:
      - kestra
    script: |
      from kestra import Kestra

      instances = []
      for i in range(10):
          instances.append({
              "ami_id": f"ami-xxxxxxxxxxxxxxx_{i}",
              "ami_launch_index": i,
              "ami_manifest_path": "/path/to/ami/manifest",
              "instance_id": f"i-0b12345abc6789xyz{i}",
              "instance_type": "t3_micro",
              "local_hostname": f"ip-172-31-32-10{i}.ec2.internal",
              "local_ipv4": f"172.31.32.10{i}",
              "public_ipv4": f"54.123.45.6{i}",
              "placement": {
                  "availability_zone": "us-east-1a",
                  "region": "us-east-1"
              },
              "security_groups": ["default"],
              "iam": {
                  "info": "some_iam_role_info",
                  "security_credentials": {
                      "role_name": "example_role"
                  }
              },
              "network_interfaces": {
                  "mac": f"0a:1b:2c:3d:4e:{50+i:02x}",
                  "device_number": 0,
                  "subnet_id": "subnet-1234abcd",
                  "vpc_id": "vpc-5678efgh",
                  "ipv4s": [f"172.31.32.10{i}"],
                  "ipv6s": []
              },
              "tags": {
                  "Name": f"MyEC2Instance_{i}",
                  "Environment": "Production"
              },
              "user_data": "#!/bin/bash\necho Hello, World!"
          })
      Kestra.outputs({"instances": instances})

  - id: for_each
    type: io.kestra.plugin.core.flow.ForEach
    values: "{{ outputs.python.vars.instances }}"
    tasks:
      - id: log
        type: io.kestra.plugin.core.log.Log
        message: "{{ taskrun.value }}"

      - id: materialize
        type: io.kestra.plugin.ee.core.assets.Materialize
        materializeAssets:
          - id: "{{ taskrun.value.instance_id }}"
            type: EC2
            values: "{{ taskrun.value | jq('del(.instance_id)') }}"
```

## Populate dropdowns and app inputs

Use assets to drive dynamic inputs in flows or apps. (Note: filtering on arbitrary `values` keys may be heavy in Postgres for very large asset sets; feasibility needs validation.)

```yaml
{{ assets(type='VM', values.cloud='AWS', values.region='us-east-1', values.status='ON') }}
```

## Show assets in custom dashboards

Render live asset metadata in dashboards for visibility and filtering:

```yaml
  - id: vm_assets
    type: io.kestra.plugin.core.dashboard.chart.Table
    chartOptions:
      displayName: Powered-on VMs
      pagination:
        enabled: true
      width: 6
    data:
      type: io.kestra.plugin.ee.core.dashboard.data.Assets
      columns:
        id:
          field: id
          displayName: Asset ID
        displayName:
          field: namespace 
          displayName: Asset Namespace 
        lastExecution:
          field: lastExecution
          displayName: Last Execution Status
        maintainer:
          field: values.maintainer
          displayName: Maintainer
        cloud:
          field: values.cloud
          displayName: Cloud Provider
        region:
          field: values.region
          displayName: Region
        ip:
          field: values.ip
          displayName: IP Address
      where:
        - field: type
          type: EQUAL_TO
          value: VM
        - field: values.status
          type: EQUAL_TO
          value: ON
```

## Export metadata to lineage providers

Adopt a standard `type` convention (e.g., `OPEN_LINEAGE`) and `values` following the [OpenLineage naming convention](https://openlineage.io/docs/spec/naming/). Exporters can add custom mappings when needed:

```yaml
type: io.kestra.plugin.ee.core.assets.AssetShipper
assetExporters:
  - id: openLineage
    type: io.kestra.plugin.ee.openlineage.AssetExporter
```

Example flow with assets and an AssetShipper:

```yaml
id: csv_to_s3_lineage
namespace: company.team

inputs:
  - id: bucket
    type: STRING
    defaults: my-bucket

tasks:
  - id: products
    type: io.kestra.plugin.core.http.Download
    uri: https://huggingface.co/datasets/kestra/datasets/resolve/main/csv/cache_demo/products.csv

  - id: load_to_s3
    type: io.kestra.plugin.aws.s3.Upload
    region: "{{ secret('AWS_DEFAULT_REGION') }}"
    accessKeyId: "{{ secret('AWS_ACCESS_KEY_ID') }}"
    secretKeyId: "{{ secret('AWS_SECRET_KEY_ID') }}"
    from: "{{ outputs.products.uri }}"
    bucket: "{{ inputs.bucket }}"
    key: data/products.csv
    assets:
      - id: products_csv_s3
        namespace: company.team
        type: OPEN_LINEAGE
        values:
          inputs:
            - namespace: file
              name: csv/cache_demo/products.csv
          outputs:
            - namespace: s3://"{{inputs.bucket}}"
              name: data/products.csv
```

```yaml
id: lineage
namespace: company.sales

tasks:
  - id: ship
    type: io.kestra.plugin.ee.core.assets.AssetShipper
    lookbackPeriod: P1D
    offsetKey: offset
    delete: false
    assetExporters:
      - id: openLineage
        type: io.kestra.plugin.ee.openlineage.AssetExporter
        connection:
          host: "{{ secret('OPENLINEAGE_HOST') }}"
          port: "{{ secret('OPENLINEAGE_PORT') }}"
          username: "{{ secret('OPENLINEAGE_USERNAME') }}"
          password: "{{ secret('OPENLINEAGE_PASSWORD') }}"
    # optional: export only assets from a given namespace, flow or execution
    filters:
      namespace: company.sales
      flowId: my_flow
      executionId: 12345678910
```

## React to asset changes

Trigger flows when assets are created or updated, using polling or realtime triggers:

```yaml
triggers:
  - id: vm_online
    type: io.kestra.plugin.ee.core.assets.Trigger
    interval: PT1M
    maxRecords: 1    
    on: CREATE # or CREATE_OR_UPDATE
    assets:
      - id: my_ec2
        type: VM
        namespace: company.team
        values:
          status: ON
```

```yaml
triggers:
  - id: realtime
    type: io.kestra.plugin.ee.core.assets.RealtimeTrigger
    on: CREATE # or CREATE_OR_UPDATE
    assets:
      - id: my_ec2
        type: VM
        namespace: company.team
        values:
          status: ON
```
