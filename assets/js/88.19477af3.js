(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{666:function(t,e,s){"use strict";s.r(e);var a=s(18),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"node"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node"}},[t._v("#")]),t._v(" Node")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"org.kestra.core.tasks.scripts.Node"')]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("Execute a Node.js script")])]),t._v(" "),s("p",[t._v("With this Node task, we can execute a full javascript script."),s("br"),t._v("\nThe task will create a temprorary folder for every tasks and allows you to install some npm packages defined in an optional "),s("code",[t._v("package.json")]),t._v(" file.")]),t._v(" "),s("p",[t._v("By convention, you need to define at least a "),s("code",[t._v("main.js")]),t._v(" files in "),s("code",[t._v("inputFiles")]),t._v(" that will be the script used."),s("br"),t._v("\nYou can also  add as many javascript files as you need in "),s("code",[t._v("inputFiles")]),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"examples"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#examples"}},[t._v("#")]),t._v(" Examples")]),t._v(" "),s("blockquote",[s("p",[t._v("Execute a node script")])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"org.kestra.core.tasks.scripts.Node"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("inputFiles")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("main.js")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n    const fs = require('fs')\n    const result = fs.readFileSync(process.argv[2], \"utf-8\")\n    console.log(JSON.parse(result).status)\n    const axios = require('axios')\n    axios.get('http://google.fr').then(d => console.log(d.status))\n    console.log(require('./mymodule').value)")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("data.json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v('\n    {"status": "OK"}')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mymodule.js")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n    module.exports.value = 'hello world'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("package.json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v('\n    {\n      "name": "tmp",\n      "version": "1.0.0",\n      "description": "",\n      "main": "index.js",\n      "dependencies": {\n          "axios": "^0.20.0"\n      },\n      "devDependencies": {},\n      "scripts": {\n          "test": "echo "Error: no test specified" && exit 1"\n      },\n      "author": "",\n      "license": "ISC"\n    }')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("args")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" data.json\n")])])]),s("h2",{attrs:{id:"inputs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#inputs"}},[t._v("#")]),t._v(" Inputs")]),t._v(" "),s("h3",{attrs:{id:"args"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#args"}},[t._v("#")]),t._v(" "),s("code",[t._v("args")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Type:")]),t._v(" "),s("mark",[t._v("array")])]),t._v(" "),s("li",[s("strong",[t._v("SubType:")]),t._v(" "),s("mark",[t._v("string")])]),t._v(" "),s("li",[s("strong",[t._v("Dynamic:")]),t._v(" âœ”ï¸")]),t._v(" "),s("li",[s("strong",[t._v("Required:")]),t._v(" âŒ")])]),t._v(" "),s("blockquote",[s("p",[t._v("node command args")])]),t._v(" "),s("p",[t._v("Arguments list to pass to main javascript script")]),t._v(" "),s("h3",{attrs:{id:"exitonfailed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exitonfailed"}},[t._v("#")]),t._v(" "),s("code",[t._v("exitOnFailed")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Type:")]),t._v(" "),s("mark",[t._v("boolean")])]),t._v(" "),s("li",[s("strong",[t._v("Dynamic:")]),t._v(" âŒ")]),t._v(" "),s("li",[s("strong",[t._v("Required:")]),t._v(" âœ”ï¸")]),t._v(" "),s("li",[s("strong",[t._v("Default:")]),t._v(" "),s("code",[t._v("true")])])]),t._v(" "),s("blockquote",[s("p",[t._v("Exit if any non true return value")])]),t._v(" "),s("p",[t._v("This tells bash that it should exit the script if any statement returns a non-true return value."),s("br"),t._v("\nThe benefit of using -e is that it prevents errors snowballing into serious issues when they could have been caught earlier.")]),t._v(" "),s("h3",{attrs:{id:"files"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#files"}},[t._v("#")]),t._v(" "),s("code",[t._v("files")])]),t._v(" "),s("p",[t._v("ðŸ”’ "),s("em",[t._v("Deprecated")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Type:")]),t._v(" "),s("mark",[t._v("array")])]),t._v(" "),s("li",[s("strong",[t._v("SubType:")]),t._v(" "),s("mark",[t._v("string")])]),t._v(" "),s("li",[s("strong",[t._v("Dynamic:")]),t._v(" âœ”ï¸")]),t._v(" "),s("li",[s("strong",[t._v("Required:")]),t._v(" âŒ")])]),t._v(" "),s("blockquote",[s("p",[t._v("The list of files that will be uploaded to internal storage,")])]),t._v(" "),s("p",[t._v("/!\\deprecated property, use "),s("code",[t._v("outputsFiles")]),t._v(" property instead")]),t._v(" "),s("h3",{attrs:{id:"inputfiles"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#inputfiles"}},[t._v("#")]),t._v(" "),s("code",[t._v("inputFiles")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Type:")]),t._v(" "),s("mark",[t._v("object")])]),t._v(" "),s("li",[s("strong",[t._v("SubType:")]),t._v(" "),s("mark",[t._v("string")])]),t._v(" "),s("li",[s("strong",[t._v("Dynamic:")]),t._v(" âœ”ï¸")]),t._v(" "),s("li",[s("strong",[t._v("Required:")]),t._v(" âŒ")])]),t._v(" "),s("blockquote",[s("p",[t._v("Input files are extra files supplied by user that make it simpler organize code.")])]),t._v(" "),s("p",[t._v("Describe a files map that will be written and usable in execution context. In python execution context is in a temp folder, for bash scripts, you can reach files using a inputsDirectory variable like 'source "+t._s(t.inputsDirectory)+"/myfile.sh'")]),t._v(" "),s("h3",{attrs:{id:"interpreter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#interpreter"}},[t._v("#")]),t._v(" "),s("code",[t._v("interpreter")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Type:")]),t._v(" "),s("mark",[t._v("string")])]),t._v(" "),s("li",[s("strong",[t._v("Dynamic:")]),t._v(" âŒ")]),t._v(" "),s("li",[s("strong",[t._v("Required:")]),t._v(" âœ”ï¸")]),t._v(" "),s("li",[s("strong",[t._v("Default:")]),t._v(" "),s("code",[t._v("/bin/sh")])]),t._v(" "),s("li",[s("strong",[t._v("Min length:")]),t._v(" "),s("code",[t._v("1")])])]),t._v(" "),s("p",[t._v("Interpreter to used")]),t._v(" "),s("h3",{attrs:{id:"interpreterargs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#interpreterargs"}},[t._v("#")]),t._v(" "),s("code",[t._v("interpreterArgs")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Type:")]),t._v(" "),s("mark",[t._v("array")])]),t._v(" "),s("li",[s("strong",[t._v("SubType:")]),t._v(" "),s("mark",[t._v("string")])]),t._v(" "),s("li",[s("strong",[t._v("Dynamic:")]),t._v(" âŒ")]),t._v(" "),s("li",[s("strong",[t._v("Required:")]),t._v(" âŒ")]),t._v(" "),s("li",[s("strong",[t._v("Default:")]),t._v(" "),s("code",[t._v("[-c]")])])]),t._v(" "),s("blockquote",[s("p",[t._v("Interpreter args used")])]),t._v(" "),s("h3",{attrs:{id:"nodepath"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nodepath"}},[t._v("#")]),t._v(" "),s("code",[t._v("nodePath")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Type:")]),t._v(" "),s("mark",[t._v("string")])]),t._v(" "),s("li",[s("strong",[t._v("Dynamic:")]),t._v(" â“")]),t._v(" "),s("li",[s("strong",[t._v("Required:")]),t._v(" âŒ")]),t._v(" "),s("li",[s("strong",[t._v("Default:")]),t._v(" "),s("code",[t._v("/usr/bin/node")])])]),t._v(" "),s("blockquote",[s("p",[t._v("The node interpreter to use")])]),t._v(" "),s("p",[t._v("Set the node interpreter path to use")]),t._v(" "),s("h3",{attrs:{id:"npmpath"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npmpath"}},[t._v("#")]),t._v(" "),s("code",[t._v("npmPath")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Type:")]),t._v(" "),s("mark",[t._v("string")])]),t._v(" "),s("li",[s("strong",[t._v("Dynamic:")]),t._v(" â“")]),t._v(" "),s("li",[s("strong",[t._v("Required:")]),t._v(" âŒ")]),t._v(" "),s("li",[s("strong",[t._v("Default:")]),t._v(" "),s("code",[t._v("/usr/bin/npm")])])]),t._v(" "),s("blockquote",[s("p",[t._v("The npm binary to use")])]),t._v(" "),s("p",[t._v("Set the npm binary path for node dependencies setup")]),t._v(" "),s("h3",{attrs:{id:"outputsfiles"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#outputsfiles"}},[t._v("#")]),t._v(" "),s("code",[t._v("outputsFiles")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Type:")]),t._v(" "),s("mark",[t._v("array")])]),t._v(" "),s("li",[s("strong",[t._v("SubType:")]),t._v(" "),s("mark",[t._v("string")])]),t._v(" "),s("li",[s("strong",[t._v("Dynamic:")]),t._v(" âŒ")]),t._v(" "),s("li",[s("strong",[t._v("Required:")]),t._v(" âŒ")])]),t._v(" "),s("blockquote",[s("p",[t._v("Output file list that will be uploaded to internal storage")])]),t._v(" "),s("p",[t._v("List of key that will generate temporary files."),s("br"),t._v("\nOn the command, just can use with special variable named "),s("code",[t._v("outputFiles.key")]),t._v("."),s("br"),t._v("\nIf you add a files with "),s("code",[t._v('["first"]')]),t._v(", you can use the special vars "),s("code",[t._v("echo 1 >> {[ outputFiles.first }}")]),t._v(" and you used on others tasks using "),s("code",{pre:!0},[t._v("{{  outputs.task-id.files.first  }}")])]),t._v(" "),s("h2",{attrs:{id:"outputs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#outputs"}},[t._v("#")]),t._v(" Outputs")]),t._v(" "),s("h3",{attrs:{id:"exitcode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exitcode"}},[t._v("#")]),t._v(" "),s("code",[t._v("exitCode")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Type:")]),t._v(" "),s("mark",[t._v("integer")])])]),t._v(" "),s("blockquote",[s("p",[t._v("The exit code of the whole execution")])]),t._v(" "),s("h3",{attrs:{id:"files-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#files-2"}},[t._v("#")]),t._v(" "),s("code",[t._v("files")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Type:")]),t._v(" "),s("mark",[t._v("object")])]),t._v(" "),s("li",[s("strong",[t._v("SubType:")]),t._v(" "),s("mark",[t._v("object")])])]),t._v(" "),s("blockquote",[s("p",[t._v("The output files uri in Kestra internal storage")])]),t._v(" "),s("h3",{attrs:{id:"stderr"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stderr"}},[t._v("#")]),t._v(" "),s("code",[t._v("stdErr")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Type:")]),t._v(" "),s("mark",[t._v("array")])]),t._v(" "),s("li",[s("strong",[t._v("SubType:")]),t._v(" "),s("mark",[t._v("string")])])]),t._v(" "),s("blockquote",[s("p",[t._v("The standard error of the commands")])]),t._v(" "),s("h3",{attrs:{id:"stdout"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stdout"}},[t._v("#")]),t._v(" "),s("code",[t._v("stdOut")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Type:")]),t._v(" "),s("mark",[t._v("array")])]),t._v(" "),s("li",[s("strong",[t._v("SubType:")]),t._v(" "),s("mark",[t._v("string")])])]),t._v(" "),s("blockquote",[s("p",[t._v("The standard output of the commands")])])])}),[],!1,null,null,null);e.default=r.exports}}]);