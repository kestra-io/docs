(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{653:function(e,t,a){"use strict";a.r(t);var r=a(19),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"deployment-with-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deployment-with-docker"}},[e._v("#")]),e._v(" Deployment with Docker")]),e._v(" "),a("p",[e._v("The quickest way to install Kestra is to use "),a("em",[e._v("Docker Compose")]),e._v(". It will start a "),a("strong",[e._v("non production")]),e._v(" Kestra with all the dependency.")]),e._v(" "),a("h2",{attrs:{id:"before-you-begin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#before-you-begin"}},[e._v("#")]),e._v(" Before you begin")]),e._v(" "),a("p",[e._v("Make sure you have already installed :")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://docs.docker.com/engine/install/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://docs.docker.com/compose/install/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker Compose"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"launch-kestra"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#launch-kestra"}},[e._v("#")]),e._v(" Launch Kestra")]),e._v(" "),a("ul",[a("li",[e._v("Download the compose file "),a("a",{attrs:{href:"https://github.com/kestra-io/kestra/blob/develop/docker-compose.yml",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("Run "),a("code",[e._v("docker-compose up")])]),e._v(" "),a("li",[e._v("Open "),a("code",[e._v("http://localhost:8080")]),e._v(" on your browser")])]),e._v(" "),a("p",[e._v("It will start all the dependencies with a preconfigured Kestra that is connected to all!")]),e._v(" "),a("p",[e._v("Kestra will start with "),a("em",[e._v("Standalone")]),e._v(" server (all the different "),a("a",{attrs:{href:"../../architecture"}},[e._v("servers")]),e._v(" in one JVM)."),a("br"),e._v("\nThis is clearly not  for "),a("strong",[e._v("production")]),e._v(" workload but sufficient to test on a local computer.")]),e._v(" "),a("h2",{attrs:{id:"docker-image"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image"}},[e._v("#")]),e._v(" Docker Image")]),e._v(" "),a("h3",{attrs:{id:"use-official-image"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-official-image"}},[e._v("#")]),e._v(" Use official image")]),e._v(" "),a("p",[e._v("The Kestra docker image is available in "),a("a",{attrs:{href:"https://hub.docker.com/r/kestra/kestra",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker hub"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("We provide 2 images :")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("kestra/kestra:latest")])]),e._v(" "),a("li",[a("code",[e._v("kestra/kestra:latest-full")])])]),e._v(" "),a("p",[e._v("The docker image is based on "),a("code",[e._v("openjdk:11-jre-slim")]),e._v(" docker image.")]),e._v(" "),a("h4",{attrs:{id:"kestra-kestra-latest"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kestra-kestra-latest"}},[e._v("#")]),e._v(" "),a("code",[e._v("kestra/kestra:latest")])]),e._v(" "),a("p",[e._v("This image :")]),e._v(" "),a("ul",[a("li",[e._v("does't contain any kestra plugins.")]),e._v(" "),a("li",[e._v("does't contain a lot of binaries to work with your "),a("RouterLink",{attrs:{to:"/plugins/core/tasks/scripts/io.kestra.core.tasks.scripts.Bash.html"}},[e._v("Bash task")]),e._v(".")],1),e._v(" "),a("li",[e._v("does't contain some binaries for "),a("a",{attrs:{href:"https://kestra.io/plugins/core/tasks/scripts/io.kestra.core.tasks.scripts.Python.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Python task"),a("OutboundLink")],1),e._v(" or "),a("a",{attrs:{href:"https://kestra.io/plugins/core/tasks/scripts/io.kestra.core.tasks.scripts.Node.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Node task"),a("OutboundLink")],1),e._v(".")])]),e._v(" "),a("h4",{attrs:{id:"kestra-kestra-latest-full"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kestra-kestra-latest-full"}},[e._v("#")]),e._v(" "),a("code",[e._v("kestra/kestra:latest-full")])]),e._v(" "),a("p",[e._v("This image contains all the kestra plugins and all the binaries for "),a("a",{attrs:{href:"https://kestra.io/plugins/core/tasks/scripts/io.kestra.core.tasks.scripts.Python.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Python task"),a("OutboundLink")],1),e._v(" or "),a("a",{attrs:{href:"https://kestra.io/plugins/core/tasks/scripts/io.kestra.core.tasks.scripts.Node.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Node task"),a("OutboundLink")],1),e._v("."),a("br"),e._v("\nTake care that this image will always contain the last version of plugins that can have some breaking change.")]),e._v(" "),a("h3",{attrs:{id:"create-a-new-image-with-more-binaries"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-new-image-with-more-binaries"}},[e._v("#")]),e._v(" Create a new image with more binaries")]),e._v(" "),a("p",[e._v("If the base or full image don't contain binaries"),a("br"),e._v("\nYou can easily create a new one with the "),a("code",[e._v("DockerFile")]),e._v(" :")]),e._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ARG")]),e._v(" IMAGE_TAG=latest")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" kestra/kestra:"),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$IMAGE_TAG")])]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("RUN")]),e._v(" mkdir -p /app/plugins && "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("\\")]),e._v("\n  apt-get update -y && "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("\\")]),e._v("\n  apt-get install -y --no-install-recommends golang && "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("\\")]),e._v("\n  apt-get clean && rm -rf /var/lib/apt/lists/* /var/tmp/*")]),e._v("\n")])])]),a("h3",{attrs:{id:"create-a-new-image-with-plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-new-image-with-plugins"}},[e._v("#")]),e._v(" Create a new image with plugins")]),e._v(" "),a("p",[e._v("By default, the kestra base docker image don't contain any plugins, but you can create a new image with all the plugins you want :")]),e._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ARG")]),e._v(" IMAGE_TAG=latest")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" kestra/kestra:"),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$IMAGE_TAG")])]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("RUN")]),e._v(" /app/kestra plugins install "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("\\")]),e._v("\n  io.kestra.plugin.notifications:task-notifications:LATEST "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("\\")]),e._v("\n  io.kestra.storage.gcs:storage-gcs:LATEST "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("\\")]),e._v("\n  io.kestra.plugin.gcp:task-gcp:LATEST ")]),e._v("\n")])])]),a("h3",{attrs:{id:"docker-image-tag"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-tag"}},[e._v("#")]),e._v(" Docker image tag")]),e._v(" "),a("p",[e._v("We provide a 3 tags for docker image :")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("latest")]),e._v(": that will contain the default latest image with its full variant "),a("code",[e._v("latest-full")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("release")]),e._v(": an image with preview of the next release  with its full variant "),a("code",[e._v("release-full")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("develop")]),e._v(": an image based on "),a("code",[e._v("develop")]),e._v(" branch that will change every day and contain all "),a("strong",[e._v("unstable")]),e._v(" feature we are working and with its full variant "),a("code",[e._v("develop-full")]),e._v(".")])])])}),[],!1,null,null,null);t.default=s.exports}}]);