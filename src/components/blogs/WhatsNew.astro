---
import { getCollection } from "astro:content";
import WhatsNewRender from "../../../components/content/WhatsNewRender.vue";

const blogs = await getCollection('blogs')

const recentBlogs = await Promise.all(blogs
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 4)
  .map(async blog => ({
    path: `/blogs/${blog.id}`,
    ...blog.data,
    image: blog.data.image,
  })))
---

<WhatsNewRender title="What's New" posts={recentBlogs} />