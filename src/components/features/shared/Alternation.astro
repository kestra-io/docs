---
const { title, items } = Astro.props

import { Image } from "astro:assets"

interface Point {
    title: string
    description: string
}

interface Item {
    title?: string
    content?: string
    description?: string
    points?: Point[]
    imgClass?: string
    image: {
        src: string
        alt: string
        width: string | number
        height: string | number
        class?: string
    }
}

interface Props {
    title?: string
    items: Item[]
}
---

<section class="container-fluid py-5">
    <div class="container">
        {
            title && (
                <div class="row d-flex justify-content-center mb-5">
                    <div class="col-12 col-lg-8 text-center">
                        <h1 class="section-title" set:html={title} />
                    </div>
                </div>
            )
        }

        <slot />

        {
            items.map((item: Item, index: number) => (
                <div
                    class:list={[
                        "row pb-3 align-items-center mx-auto container",
                        index === 0 && !title ? "mt-3" : "",
                        index % 2 === 0 ? "section-even" : "section-odd",
                    ]}
                >
                    <div
                        class:list={[
                            "col-md-6 order-1",
                            index % 2 === 0 ? "order-md-1" : "order-md-0",
                        ]}
                        data-usal={index % 2 === 0 ? "fade-l" : "fade-r"}
                    >
                        {item.title && <h3 set:html={item.title} />}
                        {item.content && <p set:html={item.content} />}
                        {item.description && <p>{item.description}</p>}
                        {item.points && item.points.length > 0 && (
                            <ul class="points-list">
                                {item.points.map((point) => (
                                    <li>
                                        <strong>{point.title}:</strong>{" "}
                                        {point.description}
                                    </li>
                                ))}
                            </ul>
                        )}
                    </div>
                    <div
                        class:list={[
                            "col-md-6 order-0 mb-3 d-flex justify-content-center",
                            index % 2 === 0 ? "order-md-0" : "order-md-1",
                            item.image.class || "mask",
                            item.imgClass,
                        ]}
                        data-usal={index % 2 === 0 ? "fade-l" : "fade-l"}
                    >
                        <Image
                            loading="lazy"
                            width={parseInt(String(item.image.width))}
                            height={parseInt(String(item.image.height))}
                            class="img-fluid"
                            src={item.image.src}
                            alt={item.image.alt}
                            format="webp"
                        />
                    </div>
                </div>
            ))
        }
    </div>
</section>

<style lang="scss">
    @import "~/assets/styles/variable";

    section {
        background-color: var(--ks-background-body);

        .container {
            h1, h3 {
                font-weight: 600;
                color: var(--ks-content-primary);
            }

            p,
            ul {
                color: var(--ks-content-primary);
                line-height: 1.6;

                b {
                    color: var(--ks-content-primary);
                    font-weight: 600;
                }
            }

            .points-list {
                padding-left: 0;
                list-style: none;

                li {
                    color: var(--ks-content-secondary);
                    margin-bottom: 0.5rem;

                    strong {
                        font-weight: 600;
                        color: var(--ks-content-primary);
                    }
                }
            }

            .mask,
            .mask-1 {
                position: relative;
                z-index: 1;

                img {
                    position: relative;
                    z-index: 10;
                    border-radius: $border-radius-lg;
                }

                &::after,
                &::before {
                    content: "";
                    position: absolute;
                    z-index: -1;
                    filter: blur(65px);
                    background: linear-gradient(
                        180deg,
                        rgba(98, 24, 255, 0),
                        #6117ff 100%
                    );
                }
            }

            .mask {
                &::after {
                    right: 20%;
                    bottom: 20%;
                    width: 15rem;
                    height: 10rem;
                }
                &::before {
                    left: 5%;
                    top: -5%;
                    width: 15rem;
                    height: 10rem;
                }
            }

            .mask-1 {
                &::after {
                    right: 30%;
                    bottom: 15%;
                    width: 14rem;
                    height: 10rem;
                    filter: blur(100px);
                }
            }
        }
    }
</style>
