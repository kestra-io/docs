---
// SVG Icons
const icons = {
    monitor: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21,16H3V4H21M21,2H3C1.89,2 1,2.89 1,4V16A2,2 0 0,0 3,18H10V20H8V22H16V20H14V18H21A2,2 0 0,0 23,16V4C23,2.89 22.1,2 21,2Z" /></svg>`,
    codeBrackets: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15,4V6H18V18H15V20H20V4M4,4V20H9V18H6V6H9V4H4Z" /></svg>`,
    tuneVariant: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 13C6.14 13 4.59 14.28 4.14 16H2V18H4.14C4.59 19.72 6.14 21 8 21S11.41 19.72 11.86 18H22V16H11.86C11.41 14.28 9.86 13 8 13M8 19C6.9 19 6 18.1 6 17C6 15.9 6.9 15 8 15S10 15.9 10 17C10 18.1 9.1 19 8 19M19.86 6C19.41 4.28 17.86 3 16 3S12.59 4.28 12.14 6H2V8H12.14C12.59 9.72 14.14 11 16 11S19.41 9.72 19.86 8H22V6H19.86M16 9C14.9 9 14 8.1 14 7C14 5.9 14.9 5 16 5S18 5.9 18 7C18 8.1 17.1 9 16 9Z" /></svg>`,
    bookOpen: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,2L14,6.5V17.5L19,13V2M6.5,5C4.55,5 2.45,5.4 1,6.5V21.16C1,21.41 1.25,21.66 1.5,21.66C1.6,21.66 1.65,21.59 1.75,21.59C3.1,20.94 5.05,20.5 6.5,20.5C8.45,20.5 10.55,20.9 12,22C13.35,21.15 15.8,20.5 17.5,20.5C19.15,20.5 20.85,20.81 22.25,21.56C22.35,21.61 22.4,21.59 22.5,21.59C22.75,21.59 23,21.34 23,21.09V6.5C22.4,6.05 21.75,5.75 21,5.5V7.5L21,13V19C19.9,18.65 18.7,18.5 17.5,18.5C15.8,18.5 13.35,19.15 12,20V13L12,8.5V6.5C10.55,5.4 8.45,5 6.5,5V5Z" /></svg>`,
    checkCircle: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M12 20C7.59 20 4 16.41 4 12S7.59 4 12 4 20 7.59 20 12 16.41 20 12 20M16.59 7.58L10 14.17L7.41 11.59L6 13L10 17L18 9L16.59 7.58Z" /></svg>`,
    bug: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14,12H10V10H14M14,16H10V14H14M20,8H17.19C16.74,7.22 16.12,6.55 15.37,6.04L17,4.41L15.59,3L13.42,5.17C12.96,5.06 12.5,5 12,5C11.5,5 11.04,5.06 10.59,5.17L8.41,3L7,4.41L8.62,6.04C7.88,6.55 7.26,7.22 6.81,8H4V10H6.09C6.04,10.33 6,10.66 6,11V12H4V14H6V15C6,15.34 6.04,15.67 6.09,16H4V18H6.81C7.85,19.79 9.78,21 12,21C14.22,21 16.15,19.79 17.19,18H20V16H17.91C17.96,15.67 18,15.34 18,15V14H20V12H18V11C18,10.66 17.96,10.33 17.91,10H20V8Z" /></svg>`,
    console: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,19V7H4V19H20M20,3A2,2 0 0,1 22,5V19A2,2 0 0,1 20,21H4A2,2 0 0,1 2,19V5C2,3.89 2.9,3 4,3H20M13,17V15H18V17H13M9.58,13L5.57,9H8.4L11.7,12.3C12.09,12.69 12.09,13.33 11.7,13.72L8.42,17H5.59L9.58,13Z" /></svg>`,
    connection: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.4 7.5C22.2 8.3 22.2 9.6 21.4 10.3L18.6 13.1L10.8 5.3L13.6 2.5C14.4 1.7 15.7 1.7 16.4 2.5L18.2 4.3L21.2 1.3L22.6 2.7L19.6 5.7L21.4 7.5M15.6 13.3L14.2 11.9L11.4 14.7L9.3 12.6L12.1 9.8L10.7 8.4L7.9 11.2L6.4 9.8L3.6 12.6C2.8 13.4 2.8 14.7 3.6 15.4L5.4 17.2L1.4 21.2L2.8 22.6L6.8 18.6L8.6 20.4C9.4 21.2 10.7 21.2 11.4 20.4L14.2 17.6L12.8 16.2L15.6 13.3Z" /></svg>`,
    shieldCheck: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z" /></svg>`,
    sourceCommit: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17,12C17,14.42 15.28,16.44 13,16.9V21H11V16.9C8.72,16.44 7,14.42 7,12C7,9.58 8.72,7.56 11,7.1V3H13V7.1C15.28,7.56 17,9.58 17,12M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z" /></svg>`,
    syncCircle: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,18A6,6 0 0,1 6,12C6,11 6.25,10.03 6.7,9.2L5.24,7.74C4.46,8.97 4,10.43 4,12A8,8 0 0,0 12,20V23L16,19L12,15M12,4V1L8,5L12,9V6A6,6 0 0,1 18,12C18,13 17.75,13.97 17.3,14.8L18.76,16.26C19.54,15.03 20,13.57 20,12A8,8 0 0,0 12,4Z" /></svg>`,
    cloudUpload: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14,13V17H10V13H7L12,8L17,13M19.35,10.03C18.67,6.59 15.64,4 12,4C9.11,4 6.6,5.64 5.35,8.03C2.34,8.36 0,10.9 0,14A6,6 0 0,0 6,20H19A5,5 0 0,0 24,15C24,12.36 21.95,10.22 19.35,10.03Z" /></svg>`,
    calendar: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,19H5V8H19V19Z" /></svg>`,
    lightningBolt: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11,21H8L13,10H11L11,3H14L9,14H11L11,21Z" /></svg>`,
    api: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 7H5A2 2 0 0 0 3 9V17H5V13H7V17H9V9A2 2 0 0 0 7 7M7 11H5V9H7M14 7H10V17H12V13H14A2 2 0 0 0 16 11V9A2 2 0 0 0 14 7M14 11H12V9H14M20 9V15H21V17H17V15H18V9H17V7H21V9Z" /></svg>`,
    sineWave: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22,12L20,12C20,10.69 19,9.58 17.69,9.5C16.8,9.45 15.95,10 15.55,10.78L14,14.66C13.19,16.45 11.13,17.3 9.34,16.5C7.55,15.69 6.7,13.63 7.5,11.84L9.04,8.11C9.21,7.7 9.18,7.23 8.97,6.84C8.76,6.45 8.39,6.19 7.96,6.14C7.5,6.09 7.05,6.23 6.71,6.55C6.37,6.87 6.18,7.31 6.18,7.78L4.18,7.78C4.18,6.62 4.69,5.54 5.58,4.83C6.47,4.13 7.63,3.87 8.73,4.12C9.83,4.37 10.77,5.09 11.32,6.1C11.86,7.1 11.95,8.29 11.56,9.38L10,13.11C9.69,13.86 10.03,14.73 10.78,15.04C11.54,15.35 12.41,15 12.72,14.25L14.26,10.37C15.22,8.12 17.37,6.75 19.64,6.75C19.77,6.75 19.91,6.75 20.04,6.77C21.16,6.86 22.15,7.45 22.77,8.38C23.4,9.31 23.6,10.47 23.31,11.56L22,12Z" /></svg>`,
    databaseCog: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,3C7.58,3 4,4.79 4,7V17C4,19.21 7.59,21 12,21C12.35,21 12.69,21 13.03,21C13,20.67 13,20.34 13,20C13,19.32 13.1,18.65 13.28,18C12.86,18 12.43,18 12,18C8.13,18 6,16.89 6,16V14.68C7.6,15.5 9.68,16 12,16C12.35,16 12.69,16 13.03,15.97C13.13,15.31 13.33,14.68 13.59,14.1C13.07,14.06 12.54,14 12,14C8.13,14 6,12.89 6,12V9.68C7.6,10.5 9.68,11 12,11C14.32,11 16.4,10.5 18,9.68V11.56C18.91,11.91 19.74,12.42 20,13V7C20,4.79 16.42,3 12,3M12,9C8.13,9 6,7.89 6,7C6,6.11 8.13,5 12,5C15.87,5 18,6.11 18,7C18,7.89 15.87,9 12,9M23.8,20.4C23.9,20.4 23.9,20.5 23.8,20.6L22.8,22.3C22.7,22.4 22.6,22.4 22.5,22.4L21.3,22C21,22.2 20.8,22.3 20.5,22.5L20.3,23.8C20.3,23.9 20.2,24 20.1,24H18.1C18,24 17.9,23.9 17.8,23.8L17.6,22.5C17.3,22.4 17,22.2 16.8,22L15.6,22.5C15.5,22.5 15.4,22.5 15.3,22.4L14.3,20.7C14.2,20.6 14.3,20.5 14.4,20.4L15.5,19.6V18.6L14.4,17.8C14.3,17.7 14.3,17.6 14.3,17.5L15.3,15.8C15.4,15.7 15.5,15.7 15.6,15.7L16.8,16.2C17.1,16 17.3,15.9 17.6,15.7L17.8,14.4C17.8,14.3 17.9,14.2 18.1,14.2H20.1C20.2,14.2 20.3,14.3 20.3,14.4L20.5,15.7C20.8,15.8 21.1,16 21.4,16.2L22.6,15.7C22.7,15.7 22.9,15.7 22.9,15.8L23.9,17.5C24,17.6 23.9,17.7 23.8,17.8L22.7,18.6V19.6L23.8,20.4M19.1,17.5A1.5,1.5 0 0,0 17.6,19A1.5,1.5 0 0,0 19.1,20.5A1.5,1.5 0 0,0 20.6,19A1.5,1.5 0 0,0 19.1,17.5Z" /></svg>`,
    unfoldLess: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.12,19.3L12,15.41L15.88,19.3L17.3,17.88L12,12.59L6.71,17.88L8.12,19.3M12,5.83L8.12,9.71L6.71,8.3L12,3L17.3,8.3L15.88,9.71L12,5.83Z" /></svg>`,
    coffee: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2,21V19H20V21H2M20,8V5H18V8H20M20,3A2,2 0 0,1 22,5V8A2,2 0 0,1 20,10H18V13A4,4 0 0,1 14,17H8A4,4 0 0,1 4,13V3H20M16,5H6V13A2,2 0 0,0 8,15H14A2,2 0 0,0 16,13V5Z" /></svg>`,
    backupRestore: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,3A9,9 0 0,0 3,12H0L4,16L8,12H5A7,7 0 0,1 12,5A7,7 0 0,1 19,12A7,7 0 0,1 12,19C10.5,19 9.09,18.5 7.94,17.7L6.5,19.14C8.04,20.3 9.94,21 12,21A9,9 0 0,0 21,12A9,9 0 0,0 12,3M14,12A2,2 0 0,0 12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12Z" /></svg>`,
    viewDashboard: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1C20.9 13.1 20.7 13.2 20.6 13.3L19.6 14.3L21.7 16.4L22.7 15.4C22.9 15.2 22.9 14.8 22.7 14.6L21.4 13.3C21.3 13.2 21.2 13.1 21 13.1M19.1 14.9L13 20.9V23H15.1L21.2 16.9L19.1 14.9M13 9V11.1L11.2 13H4V9H13M4 15H9.1L7.1 17H4V15M21 3H3C1.9 3 1 3.9 1 5V17C1 18.1 1.9 19 3 19H5V17H3V5H21V17H18V15H21V3Z" /></svg>`,
    receiptText: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 22L4.5 20.5L6 22L7.5 20.5L9 22L10.5 20.5L12 22L13.5 20.5L15 22L16.5 20.5L18 22L19.5 20.5L21 22V2L19.5 3.5L18 2L16.5 3.5L15 2L13.5 3.5L12 2L10.5 3.5L9 2L7.5 3.5L6 2L4.5 3.5L3 2V22M6 16V14H10V16H6M6 12V10H10V12H6M13 16V14H18V16H13M13 12V10H18V12H13M6 8V6H18V8H6Z" /></svg>`,
    refreshAuto: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 6V9L16 5L12 1V4C9.87 4 7.86 4.78 6.35 6.14L7.75 7.58C8.9 6.59 10.38 6 12 6M17.65 17.86C19.22 16.35 20 14.13 20 12H18C18 13.62 17.41 15.1 16.42 16.25L17.65 17.86M8.35 8.59L6.14 6.35L4.72 7.76L6.95 9.97L8.35 8.59M12 20C13.13 20 14.22 19.77 15.21 19.36L13.76 17.93C13.21 18 12.62 18 12 18V20M17.65 6.14C16.14 4.78 14.13 4 12 4V2C15.59 2 18.95 3.67 21.17 6.35L19.75 7.76C17.95 5.87 15.5 4.71 12.89 4.71C12.59 4.71 12.29 4.73 12 4.77V6C13.95 6 15.74 6.79 17.06 8.12L15.65 9.53L17.65 6.14M18.25 16.25L19.67 17.66C17.63 20.03 14.5 21.5 11 21.5C7.68 21.5 4.67 20.17 2.54 18L4 16.59C5.76 18.39 8.25 19.5 11 19.5C13.95 19.5 16.62 18.21 18.25 16.25M6 12C6 10.38 6.59 8.9 7.58 7.75L6.35 6.14C4.78 7.65 4 9.87 4 12H6Z" /></svg>`,
    bellRing: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21,19V20H3V19L5,17V11C5,7.9 7.03,5.17 10,4.29C10,4.19 10,4.1 10,4A2,2 0 0,1 12,2A2,2 0 0,1 14,4C14,4.1 14,4.19 14,4.29C16.97,5.17 19,7.9 19,11V17L21,19M14,21A2,2 0 0,1 12,23A2,2 0 0,1 10,21M19.75,3.19L18.33,4.61C20.04,6.3 21,8.6 21,11H23C23,8.07 21.84,5.25 19.75,3.19M1,11H3C3,8.6 3.96,6.3 5.67,4.61L4.25,3.19C2.16,5.25 1,8.07 1,11Z" /></svg>`,
    replay: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,5V1L7,6L12,11V7A6,6 0 0,1 18,13A6,6 0 0,1 12,19A6,6 0 0,1 6,13H4A8,8 0 0,0 12,21A8,8 0 0,0 20,13A8,8 0 0,0 12,5Z" /></svg>`,
    arrowRight: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" /></svg>`,
}

interface Card {
    title: string
    description: string
    cta: string
    link: string
    icon: string
}

interface Subsection {
    title?: string
    cards: Card[]
}

interface Section {
    title: string
    subsections: Subsection[]
}

function splitHighlight(text: string): { text: string; highlight: boolean }[] {
    const regex = /\*\*([^*]+)\*\*/g
    const parts: { text: string; highlight: boolean }[] = []
    let lastIndex = 0
    let match

    while ((match = regex.exec(text)) !== null) {
        if (match.index > lastIndex)
            parts.push({
                text: text.substring(lastIndex, match.index),
                highlight: false,
            })

        parts.push({ text: match[1], highlight: true })

        lastIndex = match.index + match[0].length
    }

    if (lastIndex < text.length)
        parts.push({ text: text.substring(lastIndex), highlight: false })

    return parts
}

const sections: Section[] = [
    {
        title: "**Developer-First** Workflow Experience",
        subsections: [
            {
                title: "Create and Run Workflows Without Deployment Headaches",
                cards: [
                    {
                        title: "Everything From the UI",
                        description:
                            "Create and run workflows from the all-in-one built-in YAML editor, syntax validation, autocompletion, and file I/O.",
                        cta: "Discover the editor",
                        link: "http://kestra.io/docs/concepts/editor",
                        icon: "monitor",
                    },
                    {
                        title: "Everything as Code",
                        description:
                            "Manage versioned flows through Git or the YAML-based format that's easy to read, edit, and maintain.",
                        cta: "Learn more",
                        link: "https://kestra.io/docs/version-control-cicd",
                        icon: "codeBrackets",
                    },
                    {
                        title: "Declarative Configuration",
                        description:
                            "Define your workflows in a portable, YAML-based format that's easy to read, edit, and maintain.",
                        cta: "Declarative Configuration",
                        link: "https://kestra.io/docs/workflow-components/flow#flow-sample",
                        icon: "tuneVariant",
                    },
                ],
            },
            {
                title: "Iterate and Debug Faster",
                cards: [
                    {
                        title: "Built-in Documentation",
                        description:
                            "Always up-to-date plugin documentation directly in the editor.",
                        cta: "Editor documentation",
                        link: "https://kestra.io/docs/ui",
                        icon: "bookOpen",
                    },
                    {
                        title: "Autocompletion & Syntax Validation",
                        description:
                            "Get real-time feedback while typing and auto-completing validations.",
                        cta: "Editor features",
                        link: "https://kestra.io/docs/concepts/editor",
                        icon: "checkCircle",
                    },
                    {
                        title: "Live Debugging Tools",
                        description:
                            "Use the live variables client to debug your tasks and preview inputs and outputs quickly.",
                        cta: "Live monitoring",
                        link: "https://kestra.io/docs/administrator-guide/monitoring#monitoring",
                        icon: "bug",
                    },
                ],
            },
            {
                title: "Modular and Language-Agnostic",
                cards: [
                    {
                        title: "Scripting Support",
                        description:
                            "Write tasks in Python, Bash, NodeJS, SQL, R, all from your browser.",
                        cta: "Supported languages",
                        link: "https://kestra.io/docs/tutorial/scripts",
                        icon: "console",
                    },
                    {
                        title: "Modular by Design",
                        description:
                            "Log outputs and observe configurations to manage better flows.",
                        cta: "Writing modular workflows",
                        link: "https://kestra.io/docs/workflow-components/subflows",
                        icon: "connection",
                    },
                    {
                        title: "Strong Typing and Validation",
                        description:
                            "Define and enforce validation for schema-driven workflows.",
                        cta: "Schema validation",
                        link: "https://kestra.io/docs/tutorial/inputs",
                        icon: "shieldCheck",
                    },
                ],
            },
            {
                title: "Versioning & Deployment",
                cards: [
                    {
                        title: "Built-in Versioning",
                        description:
                            "Every change is tracked. Preview diffs or roll back when things go wrong.",
                        cta: "Version control all your workflows",
                        link: "https://kestra.io/docs/best-practices/git",
                        icon: "sourceCommit",
                    },
                    {
                        title: "CI/CD Friendly",
                        description:
                            "Run any task from your CI/CD pipeline to automate deployments and builds.",
                        cta: "CI/CD integration",
                        link: "https://kestra.io/docs/version-control-cicd/cicd",
                        icon: "syncCircle",
                    },
                    {
                        title: "No Deploy Headaches",
                        description:
                            "Deploy directly from the UI or use CLI to automate everything.",
                        cta: "Deploy workflows",
                        link: "#",
                        icon: "cloudUpload",
                    },
                ],
            },
        ],
    },
    {
        title: "**Powerful** Execution Engine",
        subsections: [
            {
                title: "Event-Driven and Time-Based Triggers",
                cards: [
                    {
                        title: "Trigger System",
                        description:
                            "Start workflows based on file arrivals, webhooks, or scheduled times.",
                        cta: "Types of triggers",
                        link: "https://kestra.io/docs/tutorial/triggers",
                        icon: "calendar",
                    },
                    {
                        title: "Real-time Events",
                        description:
                            "React to new data instantly - no polling, database changes, message queues.",
                        cta: "Real-time processing",
                        link: "https://kestra.io/docs/workflow-components/triggers/realtime-trigger",
                        icon: "lightningBolt",
                    },
                    {
                        title: "API First",
                        description:
                            "Start flows programmatically via API, CLI, or Kestra UI.",
                        cta: "Kestra API reference",
                        link: "https://kestra.io/docs/api-reference",
                        icon: "api",
                    },
                ],
            },
            {
                title: "Scalable and Resilient",
                cards: [
                    {
                        title: "Process Data at Scale",
                        description:
                            "Use distributed mapping to handle large datasets efficiently.",
                        cta: "Distributed executions",
                        link: "https://kestra.io/docs/workflow-components/execution",
                        icon: "sineWave",
                    },
                    {
                        title: "Micro-Batch CDC",
                        description:
                            "Capture and process change data in small, manageable batches.",
                        cta: "Change data capture",
                        link: "https://kestra.io/use-cases/change-data-capture",
                        icon: "databaseCog",
                    },
                    {
                        title: "Horizontal and Vertical Scaling",
                        description:
                            "Kestra's engine scales automatically with your workloads.",
                        cta: "Scaling architecture",
                        link: "https://kestra.io/docs/enterprise/scalability",
                        icon: "unfoldLess",
                    },
                ],
            },
            {
                cards: [
                    {
                        title: "Built on the JVM",
                        description:
                            "Benefit from high performance and memory efficiency.",
                        cta: "Kestra Architecture",
                        link: "https://kestra.io/docs/architecture",
                        icon: "coffee",
                    },
                    {
                        title: "No Single Point of Failure",
                        description:
                            "Designed for fault tolerant, reliable execution.",
                        cta: "System reliability",
                        link: "https://kestra.io/docs/architecture/deployment-architecture#high-availability-deployment",
                        icon: "backupRestore",
                    },
                ],
            },
        ],
    },
    {
        title: "Built-In **Monitoring** and **Observability**",
        subsections: [
            {
                title: "Insights at a Glance",
                cards: [
                    {
                        title: "Dashboards and Metrics",
                        description:
                            "Monitor performance and usage directly in the UI.",
                        cta: "Metrics and observability",
                        link: "https://kestra.io/docs/ui/dashboard",
                        icon: "viewDashboard",
                    },
                    {
                        title: "Execution Details",
                        description:
                            "Access full logs and task-level status in real time.",
                        cta: "Inspecting logs",
                        link: "https://kestra.io/docs/ui/logs",
                        icon: "receiptText",
                    },
                ],
            },
            {
                title: "Error Handling and Notifications",
                cards: [
                    {
                        title: "Automatic Retries",
                        description:
                            "Recover from transient failures with built-in retry logic.",
                        cta: "Retry logic",
                        link: "https://kestra.io/docs/workflow-components/retries",
                        icon: "refreshAuto",
                    },
                    {
                        title: "Smart Alerts",
                        description:
                            "Get notified on completion, delay, or failure via Slack, email, or custom webhooks.",
                        cta: "Alerting triggers",
                        link: "https://kestra.io/docs/administrator-guide/monitoring",
                        icon: "bellRing",
                    },
                    {
                        title: "Replay Executions",
                        description:
                            "Fix logic and rerun failed workflows without costly re-computation of tasks that have already been completed.",
                        cta: "Rerun workflows",
                        link: "https://kestra.io/docs/concepts/replay",
                        icon: "replay",
                    },
                ],
            },
        ],
    },
]
---

<section class="experience">
    <div class="container">
        {
            sections.map((section, sectionIndex) => (
                <div class="section" data-section-index={sectionIndex}>
                    {section.title && (
                        <div class="section-title">
                            <h2>
                                {splitHighlight(section.title).map((part) =>
                                    part.highlight ? (
                                        <span class="highlight">
                                            {part.text}
                                        </span>
                                    ) : (
                                        part.text
                                    ),
                                )}
                            </h2>
                        </div>
                    )}

                    {section.subsections.map((subsection, subsectionIndex) => (
                        <div data-subsection-index={subsectionIndex}>
                            {subsection.title && (
                                <div class="section-subtitle">
                                    <h3>{subsection.title}</h3>
                                </div>
                            )}

                            <div class="features-grid">
                                {subsection.cards.map((card) => (
                                    <div class="card">
                                        <h3>
                                            <span
                                                class="icon"
                                                set:html={
                                                    icons[
                                                        card.icon as keyof typeof icons
                                                    ]
                                                }
                                            />
                                            <span class="text-truncate">
                                                {card.title}
                                            </span>
                                        </h3>
                                        <p>{card.description}</p>
                                        <a href={card.link} class="cta">
                                            <span>{card.cta}</span>
                                            <span
                                                class="arrow"
                                                set:html={icons.arrowRight}
                                            />
                                        </a>
                                    </div>
                                ))}
                            </div>
                        </div>
                    ))}
                </div>
            ))
        }
    </div>
</section>

<style lang="scss">
    @import "~/assets/styles/variable";

    .experience {
        max-height: 4283px;
        padding-top: 4rem;
        padding-bottom: 6rem;
        max-height: 100%;
        background: $white;
        position: relative;

        &::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            height: 2582px;
            background-image: radial-gradient(
                circle,
                #e0dfe3 1px,
                transparent 1px
            );
            background-size: 20px 20px;
            opacity: 0.4;
            z-index: 1;
            pointer-events: none;
        }

        .container {
            padding: 0;
            position: relative;
            z-index: 2;
        }

        @media (max-width: 767px) {
            padding: 2rem 1rem;
        }
    }

    h2 {
        font-size: 3rem;
        @media screen and (max-width: 767px) {
            font-size: 2rem !important;
        }
        font-weight: 600;
        line-height: 100%;
        margin-top: 3rem;
        margin-bottom: -1rem;
    }

    .highlight {
        background: linear-gradient(90deg, #9f79f3 0%, #658af9 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        color: transparent;
    }

    .features-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 0;

        @media (min-width: 1200px) {
            grid-template-columns: repeat(3, 1fr);
        }

        @media (min-width: 768px) and (max-width: 1199px) {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    .card {
        width: 100%;
        height: 260px;
        min-height: 260px;
        padding: 32px;
        background: $white;
        backdrop-filter: blur(10px);
        display: flex;
        flex-direction: column;
        border: 1px solid #e3e3e3;
        border-radius: 0;

        @media (min-width: 1200px) {
            &:not(:first-child):not(:nth-child(3n + 1)) {
                border-left: none;
            }

            &:nth-child(n + 4) {
                border-top: none;
            }
        }

        @media (min-width: 768px) and (max-width: 1199px) {
            width: 100%;

            &:nth-child(odd) {
                border-right: none;
            }

            &:nth-child(n + 3) {
                border-right: 1px solid #e3e3e3;
            }
        }

        @media (max-width: 767px) {
            &:not(:first-child) {
                border-top: none;
            }
        }

        h3 {
            font-size: 18.4px;
            line-height: 28px;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: $gray-900;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            flex-shrink: 0;

            :global(svg) {
                width: 24px;
                height: 24px;
            }
        }

        p {
            font-size: 1rem;
            color: $gray-700;
            margin-bottom: auto;
            line-height: 1.5;
        }

        .cta {
            position: relative;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #0087ca;
            text-decoration: none;
            width: fit-content;

            .arrow {
                display: flex;
                align-items: center;

                :global(svg) {
                    width: 16px;
                    height: 16px;
                }
            }

            &::after {
                content: "";
                position: absolute;
                width: 100%;
                transform: scaleX(0);
                border-radius: 5px;
                height: 0.05em;
                bottom: 0;
                left: 0;
                background: currentcolor;
                transform-origin: bottom right;
                transition: transform 0.25s ease-out;
            }

            &:hover::after {
                transform: scaleX(1);
                transform-origin: bottom left;
            }
        }
    }

    .section-subtitle {
        text-align: left;

        h3 {
            font-size: 2rem;
            font-weight: 600;
            @include media-breakpoint-up(lg) {
                line-height: 3rem;
            }
            margin: 2rem 0;
        }
    }

    div:not(:first-child) .section-subtitle h3 {
        margin-top: 3rem;
    }

    [data-section-index="0"] {
        .icon :global(svg path),
        .cta {
            color: #8405ff !important;
            fill: #8405ff;
        }
    }

    [data-section-index="1"] [data-subsection-index="0"] {
        .icon :global(svg path),
        .cta {
            color: #029e73 !important;
            fill: #029e73;
        }
    }

    [data-section-index="1"] [data-subsection-index="1"],
    [data-section-index="1"] [data-subsection-index="2"] {
        .icon :global(svg path),
        .cta {
            color: #1761fd !important;
            fill: #1761fd;
        }
    }

    [data-section-index="2"] {
        .icon :global(svg path),
        .cta {
            color: #05a084 !important;
            fill: #05a084;
        }
    }
</style>
