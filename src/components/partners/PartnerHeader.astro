---
interface Props {
    data: {
        logo: string
        name: string
        title: string
        subtitle: string
        heroImage: string
        cta: { href: string; text: string }
        about?: { subtitle?: string }
        metrics: {
            type: string
            logo?: string
            title?: string
            description?: string
        }[]
    }
}

const { logo, name, title, subtitle, heroImage, cta, metrics } = Astro.props.data
---

<div class="container-fluid">
    <div class="hero hero-sm container">
        <div class="mb-5 row align-items-center">
            <div class="col-lg-5 align-items-center d-flex order-1 order-lg-0">
                <div>
                    <img
                        height="80"
                        loading="lazy"
                        src={logo}
                        alt={`${name} logo`}
                    />
                    <h2>{title}</h2>
                    <p class="text-white baseline">{subtitle}</p>
                    <div class="cta">
                        <a
                            href={cta.href}
                            class="btn text-white btn-animated btn-purple-animated mt-2"
                        >
                            {cta.text}
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-7 order-0 order-lg-1">
                <img class="hero-image" src={heroImage} alt={`${name} hero`} />
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <section>
            <h2 class="mb-4 text-center">About {name}</h2>
            <div class="metrics">
                {
                    metrics.map((metric, idx) => (
                        <>
                            {metric.type === "logo" ? (
                                <div class="counter-box">
                                    <img
                                        src={metric.logo}
                                        alt={`${name} logo`}
                                    />
                                </div>
                            ) : (
                                <div class="counter-box">
                                    <h6>{metric.title}</h6>
                                    <p>{metric.description}</p>
                                </div>
                            )}
                            {metric.type !== "logo" &&
                                idx < metrics.length - 1 && (
                                    <div class="line-separator" />
                                )}
                        </>
                    ))
                }
            </div>
        </section>
    </div>
</div>

<style lang="scss">
    @import "~/assets/styles/variable";

    .container-fluid {
        background: url("/landing/usecases/cicd/bg.svg") no-repeat center;
        background-size: 100% 100%;
        padding-top: 80px;
        margin-top: -80px;
        position: relative;
        overflow: hidden;

        &::after,
        &::before {
            content: "";
            position: absolute;
            z-index: -147;
            filter: blur(100px);
            background: linear-gradient(
                180deg,
                rgba(98, 24, 255, 0) 0%,
                #6117ff 100%
            );
        }

        &::after {
            height: 34rem;
            width: 80%;
            bottom: -28%;
            left: 9%;
        }

        &::before {
            height: 36rem;
            width: 39rem;
            bottom: 25%;
            left: 51%;
        }

        @include media-breakpoint-down(lg) {
            &::before {
                width: 80%;
                bottom: 45%;
                left: 10%;
            }
        }

        h2,
        p {
            padding-bottom: 0;
        }

        .hero-image {
            width: 100%;
            border-radius: calc($spacer * 0.25);
        }
    }

    .container {
        position: relative;

        :global(section) {
            border: 1px solid var(--ks-border-secondary);
            padding: 2rem 0;
            border-radius: 8px;
            background: var(--ks-background-secondary);
            position: absolute;
            width: 100%;

            top: -7.5rem;

            .subtitle {
                font-weight: 400;
                font-size: $font-size-sm;
            }

            @include media-breakpoint-down(lg) {
                top: -5.5rem;
            }
        }

        .metrics {
            padding-left: calc($spacer * 2);
            padding-right: calc($spacer * 2);
            margin: 0 auto;
            display: flex;
            justify-content: space-around;
            flex-flow: row wrap;

            @include media-breakpoint-down(lg) {
                flex-direction: column;
                gap: 1rem;
            }

            .line-separator {
                width: calc($spacer * 0.063);
                background-color: var(--ks-border-secondary);

                @include media-breakpoint-down(lg) {
                    width: 100%;
                    height: calc($spacer * 0.063);
                }
            }

            .counter-box {
                max-width: 20%;
                display: flex;
                flex-direction: column;
                align-items: start;

                @include media-breakpoint-down(lg) {
                    max-width: 100%;
                }

                p {
                    color: var(--ks-content-secondary);
                    margin-bottom: 0;
                }
            }
        }
    }
</style>
