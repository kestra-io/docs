---
import { Image } from "astro:assets"
import TeamsImages from "~/utils/teamsImages"

const lifeCards = [
    {
        id: 1,
        type: "image-card",
        image: TeamsImages["team-group.png"],
        alt: "Team Meeting",
    },
    {
        id: 2,
        type: "text-card",
        variant: "work-your-way-card",
        title: "Work Your Way",
        description:
            "From flexible hours to fully remote work, we give you the freedom to shape your days and work where you feel your best. Your life, your balance.",
    },
    {
        id: 3,
        type: "image-card",
        image: TeamsImages["team-img-1.png"],
        alt: "Remote Work",
    },
    {
        id: 4,
        type: "text-card",
        variant: "all-in-support-card",
        title: "All-in Support",
        description:
            "We've got you covered â€” from health benefits to home office costs and the latest tools, so you can focus on what matters most: doing great work and growing with us.",
    },
    {
        id: 5,
        type: "image-card",
        image: TeamsImages["team-img-2.png"],
        alt: "Team Collaboration",
    },
    {
        id: 6,
        type: "text-card",
        variant: "hiring-card",
        title: "We're Hiring",
        description:
            "We are looking for talented open-source enthusiasts working remotely from anywhere. Browse our open positions, and find a job you love.",
        button: {
            text: "Open Roles",
            href: "/careers",
            variant: "btn-secondary",
        },
    },
]
---

<section>
    <div class="container">
        <header class="header" data-usal="fade-u">
            <h2>Life at <span class="highlight">Kestra</span></h2>
        </header>

        <div class="grid" data-usal="fade-u">
            {
                lifeCards.map((card, index) => (
                    <article
                        class={`card ${card.type} ${card.variant || ""}`}
                        data-usal={`zoomin delay-${index * 100} ease-in-out`}
                    >
                        {card.type === "image-card" && card.image ? (
                            <Image
                                src={card.image}
                                alt={card.alt!}
                                class="img"
                                width={358}
                                height={422}
                            />
                        ) : (
                            <div class="content">
                                <h3 class="heading">{card.title}</h3>
                                <p class="desc">{card.description}</p>
                                {card.button && (
                                    <a
                                        href={card.button.href}
                                        class={`btn btn-sm ${card.button.variant} cta`}
                                    >
                                        {card.button.text}
                                    </a>
                                )}
                            </div>
                        )}
                    </article>
                ))
            }
        </div>
    </div>
</section>

<style lang="scss">
    @import "~/assets/styles/variable";

    section {
        background: var(--ks-background-secondary-inverse);
        padding: $rem-4 $rem-1;

        .container {
            .header {
                h2 {
                    color: var(--ks-content-primary-inverse);
                    text-align: center;
                }
            }

            .grid {
                position: relative;
                z-index: 20;
                display: grid;
                grid-template-columns: 1fr;
                gap: $rem-2;
                justify-content: center;

                @include media-breakpoint-up(md) {
                    grid-template-columns: repeat(2, 358px);
                }

                @include media-breakpoint-up(xl) {
                    grid-template-columns: repeat(3, 358px);
                }

                .card {
                    display: flex;
                    flex-direction: column;
                    width: min(358px, 100%);
                    height: 422px;
                    border-radius: $border-radius-lg;
                    margin: 0 auto;
                    border: none;
                    outline: none;
                    overflow: clip;
                    background-color: transparent;

                    @include media-breakpoint-up(md) {
                        justify-self: center;
                    }

                    &.image-card {
                        .img {
                            width: 100%;
                            height: 100%;
                            object-fit: cover;
                        }
                    }

                    &.text-card {
                        .content {
                            padding: $rem-2;
                            height: 100%;
                            position: relative;
                            background: var(--ks-background-primary-inverse);

                            .heading {
                                color: var(--ks-content-primary-inverse);
                                margin-bottom: $rem-1;
                            }

                            .desc {
                                color: var(--ks-content-primary-inverse);
                                line-height: 1.6;
                                margin: 0;
                            }

                            .cta {
                                position: absolute;
                                bottom: $rem-2;
                                left: $rem-2;
                            }
                        }
                    }
                }
            }
        }
    }
</style>
